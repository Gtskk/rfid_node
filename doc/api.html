<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>RFID Documentation</title>
    <meta name="keywords" content="RFID" />
    <meta name="description" content="RFID package with nodejs" />
    <script src="assets/prettify.js"></script>
    <script src="assets/jquery-1.8.2.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.js"></script>
    <link rel="stylesheet" type="text/css" href="assets/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="assets/base.css" />
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="./index.html">RFID</a>
        </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
          
            <li>
              <a href="./api.html">API Docs</a>
            </li>
          
          
          </ul>
        </div><!-- /.navbar-collapse -->
      </div>
    </nav>
    <header class="jumbotron subhead">
      <div class="container">
        <h1>RFID <small>Version: 1.0.0 By @gtskk</small></h1>
        <p class="lead">
          RFID package with nodejs
        </p>
      </div>
    </header>

<div class="container content">
  <div class="row">
    <div class="col-md-3 bs-docs-sidebar">
      <ul class="nav nav-list bs-docs-sidenav affix">

  <li>
    <a href="#api_config"><i class="icon-chevron-right"></i>config</a>
  </li>

  <li>
    <a href="#api_define"><i class="icon-chevron-right"></i>define</a>
  </li>

  <li>
    <a href="#api_rfidRedis"><i class="icon-chevron-right"></i>rfidRedis</a>
  </li>

  <li>
    <a href="#api_rssi"><i class="icon-chevron-right"></i>rssi</a>
  </li>

  <li>
    <a href="#api_service"><i class="icon-chevron-right"></i>service</a>
  </li>

  <li>
    <a href="#api_socket"><i class="icon-chevron-right"></i>socket</a>
  </li>

  <li>
    <a href="#api_tagCheck"><i class="icon-chevron-right"></i>tagCheck</a>
  </li>

  <li>
    <a href="#api_tagCheck_backup20150416"><i class="icon-chevron-right"></i>tagCheck_backup20150416</a>
  </li>

  <li>
    <a href="#api_rfid/rfid"><i class="icon-chevron-right"></i>rfid/rfid</a>
  </li>

</ul>

    </div>
    <div class="col-md-9">
      
        <section id="api_config" class="api">
  <h2>config: API索引</h2>
  <ul class="indexs">
  
    <li>
      <a href="#config__readers">readers</a>
    </li>

    <li>
      <a href="#config__ants">ants</a>
    </li>

  </ul>
  <hr />

  

  <table class="table table-striped table-bordered table-hover table-condensed">
  

  
  </table>
  
  

  <table class="table table-striped table-bordered table-hover table-condensed">
  

  
  </table>
  
  
  <h3 data-id="config__readers">
    readers
  </h3>
  

  <p>读写器数据</p><p>readerId: 读写器ID<br />readerIp: 读写器IP地址<br />rssi: 读写器RSSI限定值<br />frequency: 读写器定频设置<br />stay_time: 天线驻留时长<br />inventory_time: 读写器盘点时长</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>声明</td>
      <td>readers</td> 
      <td></td>
      <td>readers</td>
    </tr>
  

  
  </table>
  
  
  <h3 data-id="config__ants">
    ants
  </h3>
  

  <p>读写器天线数据</p><p>antId: 天线ID（0-3）<br />readerId: 读写器ID<br />groupId: 组ID<br />nPower: 天线功率</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>声明</td>
      <td>ants</td> 
      <td></td>
      <td>ants</td>
    </tr>
  

  
  </table>
  
  

  <p>this.groupsInfo = {};</p><p>// 获得组信息<br />this.getGroupsInfo = function()<br />{<br />    var m = 0;<br />    for (var i = 0; i &lt; this.groups.length; i++)<br />    {<br />        var group = this.groups[i];<br />        var groupId = group.groupId;<br />        this.groupsInfo[groupId] = [];<br />        for (var j = 0; j &lt; this.ants.length; j++)<br />        {<br />            var ant = this.ants[j];<br />            if(group.groupId == ant.groupId)<br />            {<br />                for (var k = 0; k &lt; this.readers.length; k++)<br />                {<br />                    var reader = this.readers[k];<br />                    if (reader[&#39;readerId&#39;] == ant[&#39;readerId&#39;])<br />                    {<br />                        var info = {<br />                            antId: ant[&#39;antId&#39;],<br />                            readerIp: reader[&#39;readerIp&#39;]<br />                        };<br />                        this.groupsInfo[groupId].push(info);<br />                    }<br />                }<br />            }<br />        }</p><pre><code>    if(!this.groupsInfo[groupId].length)
    {
        delete this.groupsInfo[groupId];
    }

    this.groups[m] = group;
    m++;
}
</code></pre><p>};</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  

  
  </table>
  
</section>

      
        <section id="api_define" class="api">
  <h2>define: API索引</h2>
  <ul class="indexs">
  
    <li>
      <a href="#define__path">path</a>
    </li>

  </ul>
  <hr />

  
  <h3 data-id="define__path">
    path
  </h3>
  

  <p>系统常量</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>声明</td>
      <td>path</td> 
      <td></td>
      <td>path</td>
    </tr>
  

  
  </table>
  
</section>

      
        <section id="api_rfidRedis" class="api">
  <h2>rfidRedis: API索引</h2>
  <ul class="indexs">
  
    <li>
      <a href="#rfidRedis__redis">redis</a>
    </li>

  </ul>
  <hr />

  
  <h3 data-id="rfidRedis__redis">
    redis
  </h3>
  

  

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>声明</td>
      <td>redis</td> 
      <td></td>
      <td>redis</td>
    </tr>
  

  
  </table>
  
</section>

      
        <section id="api_rssi" class="api">
  <h2>rssi: API索引</h2>
  <ul class="indexs">
  
    <li>
      <a href="#rssi__RssiCalc">RssiCalc</a>
    </li>

  </ul>
  <hr />

  
  <h3 data-id="rssi__RssiCalc">
    RssiCalc
  </h3>
  

  <p>标签RSSI计算模块</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>函数</td>
      <td>RssiCalc()</td> 
      <td></td>
      <td>RssiCalc</td>
    </tr>
  

  
  </table>
  
</section>

      
        <section id="api_service" class="api">
  <h2>service: API索引</h2>
  <ul class="indexs">
  
    <li>
      <a href="#service__process">process</a>
    </li>

    <li>
      <a href="#service__getCommand">getCommand</a>
    </li>

    <li>
      <a href="#service__getTagsList">getTagsList</a>
    </li>

    <li>
      <a href="#service__getMillTimeDiffNow">getMillTimeDiffNow</a>
    </li>

    <li>
      <a href="#service__output">output</a>
    </li>

  </ul>
  <hr />

  
  <h3 data-id="service__process">
    process
  </h3>
  

  <p>处理客户端传过来的数据，找到合适的指令进行处理获取返回值</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>函数</td>
      <td>process()</td> 
      <td></td>
      <td>process</td>
    </tr>
  

    <tr>
      <td>参数</td>
      <td>data(Object)</td>
      <td colspan="2">客户端传过来的数据</td>
    </tr>
  

    <tr>
      <td>返回</td>
      <td>String</td>
      <td colspan="2">返回标签列表的序列化字符串</td>
    </tr>
  

  
  </table>
  
  
  <h3 data-id="service__getCommand">
    getCommand
  </h3>
  

  <p>读取命令结果</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>函数</td>
      <td>getCommand()</td> 
      <td></td>
      <td>getCommand</td>
    </tr>
  

    <tr>
      <td>参数</td>
      <td>data(String)</td>
      <td colspan="2">传入的数据</td>
    </tr>
  

    <tr>
      <td>undefined</td>
      <td>Object</td>
      <td>undefined</td>
      <td>params 解析出来的数据对象</td>
    </tr>
  

  
  </table>
  
  
  <h3 data-id="service__getTagsList">
    getTagsList
  </h3>
  

  <p>获取标签列表</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>函数</td>
      <td>getTagsList()</td> 
      <td></td>
      <td>getTagsList</td>
    </tr>
  

    <tr>
      <td>参数</td>
      <td>ct(String)</td>
      <td colspan="2">命令类型</td>
    </tr>
  

    <tr>
      <td>参数</td>
      <td>groupId(Number)</td>
      <td colspan="2">组ID</td>
    </tr>
  

    <tr>
      <td>参数</td>
      <td>state(String)</td>
      <td colspan="2">所要获取的标签状态</td>
    </tr>
  

    <tr>
      <td>参数</td>
      <td>callback(Function)</td>
      <td colspan="2">回调函数</td>
    </tr>
  

  
  </table>
  
  
  <h3 data-id="service__getMillTimeDiffNow">
    getMillTimeDiffNow
  </h3>
  

  <p>获取指定时间和当前时间的差异</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>函数</td>
      <td>getMillTimeDiffNow()</td> 
      <td></td>
      <td>getMillTimeDiffNow</td>
    </tr>
  

    <tr>
      <td>参数</td>
      <td>val(Number)</td>
      <td colspan="2">指定的时间</td>
    </tr>
  

    <tr>
      <td>undefined</td>
      <td>Number</td>
      <td>undefined</td>
      <td>int 时间差（单位：毫秒）</td>
    </tr>
  

  
  </table>
  
  
  <h3 data-id="service__output">
    output
  </h3>
  

  <p>格式化输出内容</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>函数</td>
      <td>output()</td> 
      <td></td>
      <td>output</td>
    </tr>
  

    <tr>
      <td>参数</td>
      <td>commandType(String)</td>
      <td colspan="2">命令类型</td>
    </tr>
  

    <tr>
      <td>参数</td>
      <td>code(Number)</td>
      <td colspan="2">状态码</td>
    </tr>
  

    <tr>
      <td>参数</td>
      <td>data(Object)</td>
      <td colspan="2">数据</td>
    </tr>
  

    <tr>
      <td>undefined</td>
      <td>String</td>
      <td>undefined</td>
      <td>JSON.stringify(res)</td>
    </tr>
  

  
  </table>
  
</section>

      
        <section id="api_socket" class="api">
  <h2>socket: API索引</h2>
  <ul class="indexs">
  
    <li>
      <a href="#socket__main">main</a>
    </li>

  </ul>
  <hr />

  
  <h3 data-id="socket__main">
    main
  </h3>
  

  <p>socket服务创建模块</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>函数</td>
      <td>main()</td> 
      <td></td>
      <td>main</td>
    </tr>
  

  
  </table>
  
</section>

      
        <section id="api_tagCheck" class="api">
  <h2>tagCheck: API索引</h2>
  <ul class="indexs">
  
    <li>
      <a href="#tagCheck__main">main</a>
    </li>

    <li>
      <a href="#tagCheck__online">online</a>
    </li>

    <li>
      <a href="#tagCheck__offline">offline</a>
    </li>

  </ul>
  <hr />

  
  <h3 data-id="tagCheck__main">
    main
  </h3>
  

  <p>标签检查模块</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>函数</td>
      <td>main()</td> 
      <td></td>
      <td>main</td>
    </tr>
  

  
  </table>
  
  
  <h3 data-id="tagCheck__online">
    online
  </h3>
  

  <p>检查在架标签</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>函数</td>
      <td>online()</td> 
      <td></td>
      <td>online</td>
    </tr>
  

    <tr>
      <td>参数</td>
      <td>读写器实例(rf)</td>
      <td colspan="2"></td>
    </tr>
  

  
  </table>
  
  
  <h3 data-id="tagCheck__offline">
    offline
  </h3>
  

  <p>检查离架标签</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>函数</td>
      <td>offline()</td> 
      <td></td>
      <td>offline</td>
    </tr>
  

    <tr>
      <td>参数</td>
      <td>读写器实例(rf)</td>
      <td colspan="2"></td>
    </tr>
  

  
  </table>
  
</section>

      
        <section id="api_tagCheck_backup20150416" class="api">
  <h2>tagCheck_backup20150416: API索引</h2>
  <ul class="indexs">
  
    <li>
      <a href="#tagCheck_backup20150416__main">main</a>
    </li>

  </ul>
  <hr />

  
  <h3 data-id="tagCheck_backup20150416__main">
    main
  </h3>
  

  <p>标签检查模块</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>函数</td>
      <td>main()</td> 
      <td></td>
      <td>main</td>
    </tr>
  

  
  </table>
  
  

  <p>rfid.open(param, function(dat) {<br />            if(dat)<br />            {<br />                for (var j = 0; j &lt; funclists.length; j++)<br />                {<br />                    funclists<a href="rfid">j</a>;<br />                }<br />            }<br />            else<br />            {<br />                logger.errorlogger.error(&#39;连接读写器&#39;+ip+&#39;错误&#39;);<br />                process.exit(1);<br />            }<br />        });</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  

  
  </table>
  
  

  <p>r.llen(epc, function(err, len)<br />            {<br />                if(err) next(err, onEpc);<br />                if(len &lt; 50)<br />                {<br />                    var returnEpc = returnDatas[epc];<br />                    r.lpush(epc, returnEpc.data.RSSI, function(){});<br />                }<br />                else if(len == 50)<br />                {<br />                    var rssi = new RssiCalc();<br />                    rssi.on(&#39;rssiCalc&#39;, function()<br />                    {<br />                        rssi.proc(epc);<br />                    });<br />                    rssi.rssiCalcCallback();<br />                }<br />            });</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  

  
  </table>
  
  

  <p>r.hget(&#39;rssiRef&#39;, epc, function(e, rssiRef)<br />            {<br />                var offEpc = null;<br />                var returnEpc = returnDatas[epc];<br />                groupId = returnEpc.group;<br />                if(returnEpc.data)<br />                {<br />                    var epcRssi = returnEpc.data.RSSI;<br />                    if(groupId != null)<br />                    {<br />                        offEpc = returnEpc;<br />                    }<br />                }</p><pre><code>            if(e) 
                next(e, offEpc);
            else 
                next(null, offEpc);
        });
</code></pre>

  <table class="table table-striped table-bordered table-hover table-condensed">
  

  
  </table>
  
  

  <p>根据读写器ip和天线端口获取组ID</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  

    <tr>
      <td>参数</td>
      <td>ip(String)</td>
      <td colspan="2">读写器IP</td>
    </tr>
  

    <tr>
      <td>参数</td>
      <td>ant(String)</td>
      <td colspan="2">读写器天线端口号</td>
    </tr>
  

    <tr>
      <td>返回</td>
      <td>Integer</td>
      <td colspan="2">返回组ID或者NULL</td>
    </tr>
  

  
  </table>
  
</section>

      
        <section id="api_rfid/rfid" class="api">
  <h2>rfid/rfid: API索引</h2>
  <ul class="indexs">
  
    <li>
      <a href="#rfid/rfid__RfidNodejs">RfidNodejs</a>
    </li>

  </ul>
  <hr />

  
  <h3 data-id="rfid/rfid__RfidNodejs">
    RfidNodejs
  </h3>
  

  <p>通过edgejs控制RFID模块<br />继承EventEmitter内部模块，然后调用emit和on的方式去监听<br />读写器信息的变化</p>

  <table class="table table-striped table-bordered table-hover table-condensed">
  
    <tr>
      <td>函数</td>
      <td>RfidNodejs()</td> 
      <td></td>
      <td>RfidNodejs</td>
    </tr>
  

  
  </table>
  
</section>

      
    </div>
  </div>
</div>
      <footer class="footer">
        <div class="container">
          <p class="pull-right">
            <a href="#">Back to top</a>
          </p>
          <p>此文档通过doxmate生成。主题借鉴Bootstrap API文档风格，注解基于<a href="https://github.com/visionmedia/dox">Dox</a>。欢迎关注doxmate作者<a href="http://weibo.com/shyvo" target="_blank">@朴灵</a></p>
          <ul class="footer-links">
            <li><a href="https://github.com/visionmedia/dox">Dox主页</a></li>
            <li><a href="http://html5ify.com/doxmate">Doxmate主页</a></li>
            <li><a href="https://github.com/JacksonTian/doxmate">Doxmate源码</a></li>
            <li><a href="https://github.com/JacksonTian/doxmate/issues?state=open">提交bug</a></li>
          </ul>
      </div>
    </footer>
    <script>
      $(function() {
        $('pre').addClass('prettyprint');
        $('td pre').removeClass('prettyprint');
        prettyPrint();
        var $window = $(window);
        $('.bs-docs-sidenav').affix({
          offset: {
            top: function () {
              return $window.width() <= 980 ? 290 : 210
            },
            bottom: 270
          }
        });
        $(".content").find('h1, h2, h3, h4, h5, h6').each(function () {
          var node = $(this);
          // 总是设置id
          node.attr("id", node.data('id') || "index_" + node.text());
          node.css("paddingTop", 50);
        });
      });
    </script>
  
  </body>
</html>

